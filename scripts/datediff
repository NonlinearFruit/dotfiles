#!/usr/bin/env nu

def main [
  date: string    # Date to harken back to
  --seconds # Diff in seconds
  --minutes # Diff in minutes
  --hours   # Diff in hours
  --days = true   # Diff in days
  --weeks   # Diff in weeks
  --years   # Diff in years
] {
  let then = $date | into datetime
  let denominator = match [$seconds $minutes $hours $days $weeks] {
    [true _ _ _ _] => 1sec,
    [_ true _ _ _] => 1min,
    [_ _ true _ _] => 1hr,
    [_ _ _ true _] => 1day,
    [_ _ _ _ true] => 1wk,
  }
  ((date now) - $then) / $denominator | math round --precision 3
}
